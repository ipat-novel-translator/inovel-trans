

# üìå **Reference: ‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏õ‡∏•‡∏ô‡∏¥‡∏¢‡∏≤‡∏¢‡∏à‡∏µ‡∏ô ‚Üí ‡πÑ‡∏ó‡∏¢ (Smart Novel Translator System)**

> ‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏û‡∏±‡∏í‡∏ô‡∏≤‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡πÅ‡∏õ‡∏•‡∏ô‡∏¥‡∏¢‡∏≤‡∏¢‡πÑ‡∏ã‡πà‡πÄ‡∏ã‡∏µ‡∏¢‡∏ô‡∏à‡∏≤‡∏Å‡∏†‡∏≤‡∏©‡∏≤‡∏à‡∏µ‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢ ‡πÇ‡∏î‡∏¢‡πÄ‡∏ô‡πâ‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥, ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô, ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå

---

## üîß ‡∏™‡πà‡∏ß‡∏ô‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö

| ‡πÑ‡∏ü‡∏•‡πå | ‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà |
|------|--------|
| `trans1.py` | ‡πÅ‡∏õ‡∏•‡∏ö‡∏ó‡πÉ‡∏´‡∏°‡πà‡∏à‡∏≤‡∏Å‡πÑ‡∏ü‡∏•‡πå `.txt` |
| `reprocess.py` | ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ö‡∏ó‡πÅ‡∏õ‡∏•‡πÄ‡∏î‡∏¥‡∏°‡∏ö‡∏ó‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏ó‡∏µ‡πà‡∏•‡πâ‡∏≤‡∏™‡∏°‡∏±‡∏¢‡∏à‡∏≤‡∏Å `glossary.yaml` |
| `reprocess_all_outdated.py` | ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ó‡∏∏‡∏Å‡∏ö‡∏ó‡∏ó‡∏µ‡πà ‚Äú‡∏•‡πâ‡∏≤‡∏™‡∏°‡∏±‡∏¢‚Äù + ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô HTML |
| `glossary_editor.py` | GUI ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç `glossary.yaml` ‡∏î‡πâ‡∏ß‡∏¢ Flet |
| `glossary.yaml` | ‡∏û‡∏à‡∏ô‡∏≤‡∏ô‡∏∏‡∏Å‡∏£‡∏°‡∏®‡∏±‡∏û‡∏ó‡πå‡πÄ‡∏â‡∏û‡∏≤‡∏∞ (‡∏ä‡∏∑‡πà‡∏≠, ‡∏™‡∏≥‡∏ô‡∏±‡∏Å, ‡∏ß‡∏¥‡∏ä‡∏≤, ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á) |
| `.meta/` | ‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÄ‡∏Å‡πá‡∏ö metadata ‡πÄ‡∏ä‡πà‡∏ô ‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô glossary ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏õ‡∏•‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ö‡∏ó |
| `reports/diff_report_*.html` | ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏Å‡πà‡∏≠‡∏ô-‡∏´‡∏•‡∏±‡∏á reprocess |

---

## üõ†Ô∏è ‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ

- **Python 3.13**
- **Flet 0.28.3** (GUI framework ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏≠‡∏õ multi-platform)
- **Git** (‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô glossary)
- **SQLite** (cache ‡∏Ñ‡∏≥‡πÅ‡∏õ‡∏•)
- **OpenAI API** (GPT-4o-mini ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏õ‡∏•‡πÅ‡∏•‡∏∞‡∏™‡∏Å‡∏±‡∏î‡∏Ñ‡∏≥)

---

## ‚ö†Ô∏è ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ó‡∏µ‡πà‡∏û‡∏ö & ‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç

### 1. **Flet 0.28.3 ‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á API ‡∏´‡∏•‡∏≤‡∏¢‡∏à‡∏∏‡∏î**

| ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ | ‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç |
|------|----------|
| ‚ùå `ft.colors.GREY_100` ‚Üí ‡πÑ‡∏°‡πà‡∏°‡∏µ | ‚úÖ ‡πÉ‡∏ä‡πâ `ft.Colors.GREY_100` (‡∏ï‡∏±‡∏ß‡πÉ‡∏´‡∏ç‡πà) |
| ‚ùå `ft.icons.DELETE_OUTLINE` ‚Üí ‡πÑ‡∏°‡πà‡∏°‡∏µ | ‚úÖ ‡πÉ‡∏ä‡πâ `ft.Icons.DELETE_OUTLINE` |
| ‚ùå `DatePicker` ‡πÑ‡∏°‡πà‡∏°‡∏µ `pick_date()` | ‚úÖ ‡πÉ‡∏ä‡πâ `page.open(date_picker)` ‡πÅ‡∏ó‡∏ô |
| ‚ùå `page.edit_container` ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏® | ‚úÖ ‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏® `page.edit_container = ft.Column()` ‡∏Å‡πà‡∏≠‡∏ô‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô |

> üí° **‡∏™‡∏£‡∏∏‡∏õ:** Flet ‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å `lowercase` ‚Üí `PascalCase` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö constants

---

### 2. **Syntax Error ‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£ copy-paste ‡πÇ‡∏Ñ‡πâ‡∏î**

| ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ | ‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç |
|------|----------|
| ‚ùå `if hanzi in current_` | ‚úÖ ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô `if hanzi in current_` |
| ‚ùå ‡∏Ç‡∏≤‡∏î `:` ‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç | ‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö |
| ‚ùå ‡∏ï‡∏±‡∏î‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏Å‡∏•‡∏≤‡∏á‡∏Ñ‡∏≥ ‚Üí ‡πÄ‡∏ä‡πà‡∏ô `full_data` ‚Üí `full_` | ‚úÖ ‡πÉ‡∏ä‡πâ editor ‡∏ó‡∏µ‡πà‡∏î‡∏µ (VS Code) + ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏î‡πâ‡∏ß‡∏¢ `python -m py_compile` |

---

### 3. **GUI ‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å scope ‡πÅ‡∏•‡∏∞ closure**

| ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ | ‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç |
|------|----------|
| ‚ùå `UnboundLocalError: add_button` | ‚úÖ ‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏Å‡πà‡∏≠‡∏ô‡πÉ‡∏ä‡πâ‡πÉ‡∏ô `filter_row` |
| ‚ùå `NameError: cannot access free variable 'edit_container'` | ‚úÖ ‡πÉ‡∏ä‡πâ `page.edit_container` ‡πÅ‡∏ó‡∏ô‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ global |

---

## ‚úÖ ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏í‡∏ô‡∏≤‡πÅ‡∏•‡πâ‡∏ß

### ‚úÖ 1. ‡πÅ‡∏õ‡∏•‡∏ö‡∏ó‡πÉ‡∏´‡∏°‡πà (`trans1.py`)
- ‡πÉ‡∏ä‡πâ glossary + cache + Aho-Corasick
- ‡πÅ‡∏ö‡πà‡∏á chunk ‡∏≠‡∏±‡∏à‡∏â‡∏£‡∏¥‡∏¢‡∏∞
- ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å metadata (‡πÄ‡∏ä‡πà‡∏ô `last_glossary_commit`)

### ‚úÖ 2. ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ö‡∏ó‡πÄ‡∏Å‡πà‡∏≤‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
- ‡∏ï‡∏£‡∏ß‡∏à‡∏ß‡πà‡∏≤‡∏ö‡∏ó‡πÑ‡∏´‡∏ô ‚Äú‡∏•‡πâ‡∏≤‡∏™‡∏°‡∏±‡∏¢‚Äù ‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á glossary
- ‡πÅ‡∏õ‡∏•‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö (Selective Retranslation)

### ‚úÖ 3. GUI ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç glossary (`glossary_editor.py`)
- ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå‡πÅ‡∏ö‡∏ö real-time
- **‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏¥‡πà‡∏° (`added_at`)**
- **‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏ö‡∏ó‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏≤‡∏Å‡∏è‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å (`chapter_first_seen`)**
- ‡∏Å‡∏î ‚Äú‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‚Äù ‚Üí auto `git add && git commit`

### ‚úÖ 4. ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á
- ‡∏™‡∏£‡πâ‡∏≤‡∏á `diff_report_YYYYMMDD_HHMMSS.html`
- ‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡πÅ‡∏ö‡∏ö‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö (‡∏Å‡πà‡∏≠‡∏ô/‡∏´‡∏•‡∏±‡∏á)
- ‡∏•‡∏ö‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏Å‡πà‡∏≤‡πÄ‡∏Å‡∏¥‡∏ô 30 ‡∏ß‡∏±‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

---

## üìÅ ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå

```
Trans1/
‚îú‚îÄ‚îÄ chapters_src/
‚îú‚îÄ‚îÄ chapters_translated/
‚îÇ   ‚îî‚îÄ‚îÄ .meta/
‚îú‚îÄ‚îÄ logs/
‚îú‚îÄ‚îÄ reports/
‚îú‚îÄ‚îÄ backups/
‚îú‚îÄ‚îÄ glossary.yaml
‚îú‚îÄ‚îÄ trans1.py
‚îú‚îÄ‚îÄ reprocess.py
‚îú‚îÄ‚îÄ reprocess_all_outdated.py
‚îî‚îÄ‚îÄ glossary_editor.py
```

---

## üöÄ ‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

```bash
# 1. ‡πÅ‡∏õ‡∏•‡∏ö‡∏ó‡πÉ‡∏´‡∏°‡πà
python trans1.py chapters_src/sa_0001.txt

# 2. ‡πÅ‡∏Å‡πâ glossary ‡∏ú‡πà‡∏≤‡∏ô GUI
python glossary_editor.py

# 3. ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ö‡∏ó‡∏ó‡∏µ‡πà‡∏•‡πâ‡∏≤‡∏™‡∏°‡∏±‡∏¢
python reprocess_all_outdated.py
```

---

‡∏â‡∏±‡∏ô‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏õ‡∏•‡∏ô‡∏¥‡∏¢‡∏≤‡∏¢‡∏à‡∏µ‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏ó‡∏¢ ‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏â‡∏±‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£...